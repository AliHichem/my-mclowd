{% extends '::base.html.twig' %}

{% block content %}



<div ng-app="Marketplace" ng-controller="ProposalCtrl">

    <div ng-init='proposals={{ proposalsJson|raw }}'></div>
    {% raw %}
    <form id="proposal-form" class="form-horizontal" ng-submit="addProposal()">
        <fieldset>
            <legend>Legend</legend>
            <div class="control-group">
            {% endraw %}
                <label class="control-label" for="description">{% trans from "app" %}Description{% endtrans %}</label>
            {% raw %}
                <div class="controls">
                    <textarea id="description" placeholder="Description" ng-model="newProposal.description"></textarea>
                </div>
            </div>
            <div class="control-group">
            {% endraw %}
                <label class="control-label" for="hours">{% trans from "app" %}Hours{% endtrans %}</label>
            {% raw %}
                <div class="controls">
                    <input id="hours" type="text" placeholder="hours" ng-model="newProposal.hours" />
                </div>
            </div>
            <div class="control-group">
            {% endraw %}
                <label class="control-label" for="duration">{% trans from "app" %}Duration{% endtrans %}</label>
            {% raw %}
                <div class="controls">
                    <select ng-model="newProposal.duration">
                        <option ng-repeat="v in durationOptions" 
                                value="{{v.value}}" 
                                title="{{v.name}}" 
                                ng-selected="v.value == newProposal.duration">{{v.name}}
                        </option>
                    </select>
                </div>
            {% endraw %}
            </div>
            <div class="control-group">
                <label class="control-label" for="rate">{% trans from "app" %}Rate{% endtrans %}</label>
            {% raw %}
                <div class="controls">
                    <input type="text" placeholder="Rate" ng-model="newProposal.rate" />
                </div>
            </div>
            <div class="control-group">
                <div class="controls">
                    <input type="hidden" ng-model="newProposal.task" ng-init="newProposal.task='{% endraw %}{{ task }}{% raw %}'" />
                    <input type="submit" class="btn" value="Make proposal" />
                </div>
            </div>
    </form>
    
    <div>
        <ul>
            <li ng-repeat="proposal in proposals">
                {{ proposal.id }} <small>({{ proposal.description }})</small>
            </li>
        </ul>
    </div>
    {% endraw %}
    
</div>



<form action="{{ path('app_proposals_create') }}" method="post" >

    {{ form_widget(form) }}

    <input type="submit" value="Make Proposal" />

</form>

{% endblock %}

