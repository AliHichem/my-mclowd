{% extends '::base.html.twig' %}

{% block content %}

<h3>{{ user }}</h3>


<div ng-controller="ContractorEditCtrl">

     <div ng-init='profile={{ userJson|raw }}'></div>

    <form action="{{ path('contractor_edit') }}" method="POST" {{ form_enctype(avatarForm) }} />        
        {% if user.avatar %}
            <img src="{{ user.avatar.path('medium') }}" />
        {% endif %}

        {{ form_errors(avatarForm) }}
        {{ form_widget(avatarForm.uploadedAvatar) }}
        {{ form_errors(avatarForm.uploadedAvatar) }}
        {{ form_rest(avatarForm) }}
        <input type="submit" value="Upload new avatar" name="uploadingAvatar" />
    </form>

    {% raw %}
    <div class="well">
        <input ng-model="profile.fullname" placeholder="Specify your name" />
        <small>{{ profile.fullname }}</small>
    </div>

    <div class="well">
        <input ng-model="profile.tagLine" placeholder="Specify tag line" />
        <small>{{ profile.tagLine }}</small>
    </div>

    <div class="well">
        <h5>Set prices for tasks</h5>
        <form id="task-form" ng-submit="addTask()">
            <input placeholder="Enter a task" ng-model="newTask.name" />
            <input placeholder="Enter amount" ng-model="newTask.amount" />
            <input type="submit" value="Add new task" />
        </form>

        <ul>
            <li ng-repeat="task in profile.tasks">
                {{ task.name }} : {{ task.amount + '$' }} <button class="btn btn-danger" ng-click="removeTask(task)">Remove</button>
            </li>
        </ul>
    </div>

     <div class="well">
        <input ng-model="profile.city" placeholder="Specify your city" />
        <button class="btn" ng-click="save(profile)" ng-show="changed.city">Confirm</button>
    </div>


    {% endraw %}



</div>
{% endblock %}
